<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>主催大会一覧</title>

    <style>
        body {
            font-family: "Segoe UI", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
            background-color: #f5f7fa;
            margin: 0;
            padding: 30px;
        }

        h2 {
            margin-bottom: 20px;
            color: #333;
        }

        table {
            width: 100%;
            max-width: 1000px;
            border-collapse: collapse;
            background: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        thead {
            background-color: #2c3e50;
            color: #fff;
        }

        th, td {
            padding: 12px 14px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }

        th {
            font-weight: 600;
        }

        tbody tr:hover {
            background-color: #f0f4ff;
        }

        td a {
            text-decoration: none;
            color: #3498db;
            font-weight: 500;
            margin: 0 4px;
        }

        td a:hover {
            text-decoration: underline;
        }

        /* 戻るボタン */
        .btn-back {
            display: inline-block;
            padding: 10px 20px;
            background-color: #95a5a6;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.15);
        }
        .btn-back:hover {
            background-color: #7f8c8d;
        }
        
        /* 新規作成リンク */
        .new-link {
            float: right;
            margin-bottom: 10px;
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>

<body>

<h2>主催大会一覧</h2>

<div style="max-width: 1000px;">
    <a th:href="@{/organizer/events/new}" class="new-link">＋ 新規作成</a>
</div>

<table>
    <thead>
    <tr>
        <th>大会名</th>
        <th>開催日</th>
        <th>申込数</th>
        <th>締切</th>
        <th>種別</th>
        <th>操作</th>
    </tr>
    </thead>
    <tbody>
    <tr th:if="${#lists.isEmpty(events)}">
        <td colspan="6" style="padding: 20px; color: #888;">作成済みの大会はありません。</td>
    </tr>
    
    <tr th:each="event : ${events}">
        <td th:text="${event.name}"></td>
        <td th:text="${event.date}"></td>
        
        <td style="font-weight: bold; color: #2980b9;">
            <span th:text="${counts.get(event.id)}">0</span>
            <span style="color: #999; font-size: 0.9em;" th:text="' / ' + ${event.capacity}"> / 100</span>
        </td>
        
        <td th:text="${#temporals.format(event.deadline, 'yyyy-MM-dd HH:mm')}"></td>
        <td th:text="${event.type}"></td>
        <td style="white-space: nowrap;"> <a th:href="@{'/organizer/events/' + ${event.id} + '/detail'}">詳細</a>
            |
            <a th:href="@{'/organizer/events/' + ${event.id} + '/entries'}">参加者一覧</a>
            |
            <form th:action="@{'/organizer/events/' + ${event.id} + '/delete'}" method="post" style="display:inline;">
                <button type="submit" 
                        onclick="return confirm('【警告】\n本当にこの大会を削除しますか？\n参加者データも全て消えます。この操作は取り消せません。');"
                        style="background:none; border:none; color:red; cursor:pointer; font-weight:bold; padding:0; font-size:1em;">
                    削除
                </button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

<div>
    <a th:href="@{/organizer/dashboard}" class="btn-back">ダッシュボードへ戻る</a>
</div>

</body>
</html>