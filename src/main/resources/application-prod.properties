spring.application.name=TTMT

# ==========================================
# ★★★ データベース (TiDB Cloud) ★★★
# ==========================================
spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/test?sslMode=VERIFY_IDENTITY&enabledTLSProtocols=TLSv1.2,TLSv1.3
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ==========================================
# ★★★ JPA設定 ★★★
# ==========================================
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Tokyo

# ==========================================
# ★★★ メール設定 (修正版) ★★★
# ==========================================
spring.mail.host=smtp.gmail.com
# ★ここを 587 から 465 に変更！
spring.mail.port=587
# ★この行を追加（プロトコルを明示）
spring.mail.protocol=smtps

spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}

# 詳細設定（465番ポート用の設定）
spring.mail.properties.mail.smtps.auth=true
spring.mail.properties.mail.smtps.starttls.enable=true
spring.mail.properties.mail.smtps.starttls.required=true
spring.mail.properties.mail.smtps.timeout=30000
spring.mail.properties.mail.smtps.connectiontimeout=30000
spring.mail.properties.mail.smtps.writetimeout=30000

# ==========================================
# ★★★ アプリ固有設定 ★★★
# ==========================================
app.mail.from=${MAIL_USERNAME}
app.mail.from-name=TTMT事務局
app.mail.enabled=true